{"version":3,"sources":["index.js"],"names":["history","createBrowserHistory","Nav","hand","e","preventDefault","push","pathname","target","href","onClick","routes","path","action","mode","console","log","redirect","fetch","then","res","json","data","map","user","email","id","router","UniversalRouter","context","root","document","getElementById","renderRoute","location","a","resolve","page","render","listen"],"mappings":"6MAKMA,EAAUC,cAEVC,EAAM,WACV,SAASC,EAAKC,GACZA,EAAEC,iBACFL,EAAQM,KAAK,CAAEC,SAAUH,EAAEI,OAAOD,WAEpC,OACE,qCACE,mBAAGE,KAAK,IAAIC,QAASP,EAArB,eAEK,IAHP,IAII,IACF,mBAAGM,KAAK,KAAKC,QAASP,EAAtB,eAGA,2BAKAQ,EAAS,CACb,CACEC,KAAM,IACNC,OAAQ,kBACN,qCACE,cAACX,EAAD,IACA,uBACA,uCAIN,CACEU,KAAM,KAENC,OAAQ,YACN,MAAa,MADO,EAAXC,MAEPC,QAAQC,IAAI,oBACL,CAAEC,SAAU,MAEdC,MAAM,8CACVC,MAAK,SAACC,GAAD,OAASA,EAAIC,UAClBF,MAAK,SAACG,GACL,OACE,qCACE,cAACpB,EAAD,IACA,uBACCoB,EAAKC,KAAI,SAACC,GAAD,OACR,kCAAmBA,EAAKC,QAAhBD,EAAKE,gBAUvBC,EAAS,IAAIC,IAAgBjB,EAAQ,CAAEkB,QAAS,CAAEf,KAAM,OAExDgB,EAAOC,SAASC,eAAe,Q,SAEtBC,E,8EAAf,WAA2BC,GAA3B,eAAAC,EAAA,+EAEuBR,EAAOS,QAAQ,CAAE7B,SAAU2B,EAAS3B,WAF3D,YAEU8B,EAFV,QAGapB,SAHb,yCAIajB,EAAQM,KAAK,CAAEC,SAAU8B,EAAKpB,YAJ3C,gCAMWqB,iBAAOD,EAAMP,IANxB,gCAQIf,QAAQC,IAAR,MARJ,0D,sBAYAhB,EAAQuC,QAAO,mBAAkBN,EAAlB,EAAGC,aAClBD,EAAYjC,EAAQkC,Y","file":"static/js/main.437e2211.chunk.js","sourcesContent":["import React from \"react\";\nimport { render } from \"react-dom\";\nimport UniversalRouter from \"universal-router\";\nimport { createBrowserHistory } from \"history\";\n\nconst history = createBrowserHistory();\n\nconst Nav = () => {\n  function hand(e) {\n    e.preventDefault();\n    history.push({ pathname: e.target.pathname });\n  }\n  return (\n    <>\n      <a href=\"/\" onClick={hand}>\n        A\n      </a>{\" \"}\n      |{\" \"}\n      <a href=\"/b\" onClick={hand}>\n        B\n      </a>\n      <hr />\n    </>\n  );\n};\n\nconst routes = [\n  {\n    path: \"/\",\n    action: () => (\n      <>\n        <Nav />\n        <br />\n        <p>A</p>\n      </>\n    ),\n  },\n  {\n    path: \"/b\",\n    // to protect the results\n    action: ({ mode }) => {\n      if (mode === \"A\") {\n        console.log(\"redirected to /A\");\n        return { redirect: \"/\" };\n      }\n      return fetch(\"https://jsonplaceholder.typicode.com/users\")\n        .then((res) => res.json())\n        .then((data) => {\n          return (\n            <>\n              <Nav />\n              <br />\n              {data.map((user) => (\n                <p key={user.id}> {user.email}</p>\n              ))}\n            </>\n          );\n        });\n    },\n  },\n];\n\n// change the value of mode: if \"A\", B -> A, else B->B\nconst router = new UniversalRouter(routes, { context: { mode: \"B\" } });\n\nconst root = document.getElementById(\"root\");\n\nasync function renderRoute(location) {\n  try {\n    const page = await router.resolve({ pathname: location.pathname });\n    if (page.redirect) {\n      return history.push({ pathname: page.redirect });\n    }\n    return render(page, root);\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nhistory.listen(({ location }) => renderRoute(location));\nrenderRoute(history.location);\n"],"sourceRoot":""}